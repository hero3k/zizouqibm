# 桂味杯自走棋比赛网站 ☁️ 云同步版

一个支持**多人实时协作**的自走棋比赛报名和管理网站，采用荔枝主题设计。

## 🚀 重大升级：云同步功能

### ☁️ **云端数据同步**
- **多设备支持**：所有设备看到相同数据
- **实时更新**：3秒自动同步最新状态
- **离线恢复**：网络恢复后自动同步
- **数据安全**：云端备份，永不丢失

### 🤝 **多人协作**
- **任何人报名**：无需指定管理员
- **共同管理**：任何人都可以添加对局
- **实时反馈**：操作成功立即同步到所有设备
- **冲突处理**：自动处理并发操作

## 🏆 功能特色

- **🍃 无需登录报名**：输入姓名即可快速报名
- **📊 实时积分排行榜**：自动计算积分，云端同步排名
- **⚔️ 多人对局管理**：任何人都可以添加对局，自动分配积分
- **🔥 斩杀阶段**：25分进入斩杀阶段，特殊视觉效果
- **👑 桂味之冠**：斩杀阶段吃鸡获得冠军称号
- **🎨 荔枝主题**：炫酷的荔枝风格UI设计
- **☁️ 云端同步**：多设备实时数据同步

## 🎮 比赛规则

- **积分规则**：1-8名分别获得 8-6-5-4-3-2-1-0 分
- **斩杀阶段**：总积分达到25分进入斩杀阶段
- **冠军获得**：斩杀阶段中获得第一名即可获得"桂味之冠"
- **比赛结束**：当三个人获得桂味之冠时比赛结束
- **奖励设置**：前三名获得桂味荔枝6斤

## 🚀 快速开始

### 本地开发

1. 安装依赖：
```bash
npm install
```

2. 启动开发服务器：
```bash
npm run dev
```

3. 打开浏览器访问：http://localhost:3000

### 部署到Netlify（推荐 - 国内访问稳定）

1. **设置独立Redis数据库**：
   - 访问 [Upstash Console](https://console.upstash.com/)
   - 免费注册账号
   - 创建新的Redis数据库（免费额度足够）
   - 记录REST API URL和Token

2. **部署到Netlify**：
   - 访问 [netlify.com](https://netlify.com)
   - 使用GitHub登录
   - 点击"New site from Git"
   - 选择GitHub仓库 `hero3k/zizouqibm`

3. **配置环境变量**：
   - 在Netlify项目设置中，找到"Environment variables"
   - 添加以下变量：
     - `UPSTASH_REDIS_REST_URL`: 您的Redis URL
     - `UPSTASH_REDIS_REST_TOKEN`: 您的Redis Token

4. **部署完成**：Netlify会自动构建和部署

### 部署到Vercel（备选方案）

1. **推送到GitHub**：
```bash
git add .
git commit -m "🚀 升级云同步版本"
git push origin main
```

2. **在Vercel中部署**：
   - 访问 [vercel.com](https://vercel.com)
   - 导入GitHub仓库
   - **启用Vercel KV数据库**：
     - 在项目设置中点击 "Storage"
     - 选择 "Create KV Database"
     - 连接到项目
   - 点击 "Deploy"

3. **自动配置完成**：
   - Vercel会自动配置KV数据库环境变量
   - 部署完成后即可使用云同步功能

## 📱 使用说明

### 🌐 多人使用场景

**所有人都可以：**
1. **报名参赛**：任何设备打开网站，输入姓名报名
2. **查看排行**：实时查看最新积分排行榜
3. **添加对局**：游戏结束后，任何人都可以录入成绩
4. **同步查看**：所有设备看到相同的比赛状态

### 📊 实时同步特性
- **自动刷新**：每3秒自动同步云端数据
- **操作反馈**：操作成功后立即推送到所有设备
- **网络恢复**：断网重连后自动同步最新状态
- **状态指示**：左上角显示云同步状态

## 🎨 设计特色

- **荔枝主题配色**：粉红色和绿色搭配
- **云同步指示**：实时显示同步状态
- **动画效果**：平滑的过渡和交互动画
- **响应式设计**：完美适配手机和电脑
- **状态标识**：清晰的选手状态显示

## 📊 数据存储升级

### 🏗️ 技术架构
- **前端**：Next.js 14 + React + TypeScript
- **数据同步**：SWR (实时数据获取)
- **后端API**：Next.js API Routes
- **数据库**：Upstash Redis (跨平台)
- **部署**：Netlify/Vercel (自动扩展)

### ☁️ 云端优势
- **多设备同步**：所有设备实时同步
- **数据安全**：云端备份，永不丢失
- **高可用性**：99.9%在线率
- **自动扩展**：支持大量并发访问

## 🛠 技术栈

- **前端框架**：Next.js 14
- **样式处理**：Tailwind CSS
- **类型检查**：TypeScript
- **数据同步**：SWR
- **后端API**：Next.js API Routes
- **数据库**：Upstash Redis (跨平台)
- **部署平台**：Netlify/Vercel

## 📂 项目结构

```
├── src/
│   ├── app/
│   │   ├── api/
│   │   │   └── tournament/
│   │   │       └── route.ts        # 云端API接口
│   │   ├── layout.tsx              # 根布局
│   │   ├── page.tsx                # 主页面(云同步版)
│   │   └── globals.css             # 全局样式
│   ├── components/
│   │   ├── TournamentHeader.tsx    # 比赛标题组件
│   │   ├── RegistrationForm.tsx    # 报名表单组件
│   │   ├── Leaderboard.tsx         # 积分排行榜组件
│   │   └── MatchManager.tsx        # 对局管理组件
│   ├── types/
│   │   └── tournament.ts           # 类型定义
│   └── utils/
│       ├── tournament.ts           # 比赛逻辑
│       └── api.ts                  # 云端API调用
├── package.json                    # 项目配置(含云同步依赖)
├── tailwind.config.js             # Tailwind配置
├── tsconfig.json                  # TypeScript配置
└── vercel.json                    # Vercel部署配置
```

## 🌟 云同步功能详解

### 🔄 自动同步机制
- **定时同步**：每3秒自动获取最新数据
- **焦点同步**：切换回页面时立即同步
- **网络恢复**：断网重连后自动同步
- **乐观更新**：操作立即生效，后台同步

### 📱 多设备体验
- **手机端**：随时随地查看和操作
- **电脑端**：大屏幕管理比赛
- **平板端**：完美的触控体验
- **所有设备**：数据完全同步

### 🚀 性能优化
- **缓存策略**：智能缓存减少网络请求
- **增量更新**：只同步变化的数据
- **错误恢复**：网络错误时自动重试
- **离线支持**：短暂离线不影响使用

## 📧 联系方式

如有问题或建议，请联系开发者。

---

🍃 **桂味杯自走棋比赛云同步版** - 多人协作，实时同步，让比赛管理更简单！ 